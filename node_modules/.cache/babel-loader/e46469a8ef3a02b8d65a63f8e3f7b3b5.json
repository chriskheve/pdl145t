{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\CK\\\\Documents\\\\EMERGENCE\\\\react\\\\rawsur\\\\client\\\\EPICPRO HR - React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\CK\\\\Documents\\\\EMERGENCE\\\\react\\\\rawsur\\\\client\\\\EPICPRO HR - React\\\\src\\\\components\\\\HRMS\\\\Report\\\\Info.js\";\nimport React, { useEffect, useState } from 'react';\nimport L from 'leaflet';\nimport { MapContainer, TileLayer, Marker, Popup, GeoJSON, useMap } from 'react-leaflet';\nimport mapDefault from './mapDefault.json';\nimport markerIconPng from \"leaflet/dist/images/marker-icon.png\";\nimport { Icon } from 'leaflet';\nimport { useHistory } from 'react-router-dom';\nimport { getProvince } from '../../../api/province';\n\nfunction Info() {\n  var _this = this;\n\n  var history = useHistory();\n  var map = useMap(); // console.log(\"map provinceList\", provinceList[0] && provinceList[0].nom)\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      provinceList = _useState2[0],\n      setProvinceList = _useState2[1];\n\n  var fetchData = React.useCallback(function () {\n    getProvince().then(function (response) {\n      setProvinceList(response.data);\n      console.log('setProvinceList ', response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  React.useEffect(function () {\n    fetchData();\n  }, [fetchData]);\n  useEffect(function () {\n    var div;\n\n    function getColor(d) {\n      return d > 400 ? '#cb181d' : d > 300 ? '#fb6a4a' : d > 200 ? '#fcae91' : d > 100 ? '#fee5d9' : '#fff7fb';\n    }\n\n    if (map) {\n      // \n      var style = function style(feature) {\n        return {\n          weight: 2,\n          opacity: 1,\n          color: 'white',\n          dashArray: '3',\n          fillOpacity: 0.7,\n          // fillColor: getColor(casPositif)\n          fillColor: getColor(feature.properties.liveCases)\n        };\n      };\n\n      var highlightFeature = function highlightFeature(e) {\n        var layer = e.target;\n        layer.setStyle({\n          weight: 5,\n          color: '#666',\n          dashArray: '',\n          fillOpacity: 0.7\n        });\n\n        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {\n          layer.bringToFront();\n        }\n\n        info.update(layer.feature.properties);\n      };\n\n      var resetHighlight = function resetHighlight(e) {\n        geojson.resetStyle(e.target);\n        info.update();\n      };\n\n      var zoomToFeature = function zoomToFeature(e) {\n        var layer = e.target;\n        map.fitBounds(e.target.getBounds()); // setVilleData(layer.feature.properties.ville)\n        // console.log(\"layer is...\", layer.feature.properties.name)\n        // console.log(\"provinces geojson\", provsDatas)\n        // dispatch(setCitiesDatas(layer.feature.properties.ville))\n        // showMarker()\n\n        history.push('/');\n      };\n\n      var onEachFeature = function onEachFeature(feature, layer) {\n        layer.on({\n          mouseover: highlightFeature,\n          mouseout: resetHighlight,\n          click: zoomToFeature\n        });\n      };\n\n      var info = L.control();\n\n      info.onAdd = function () {\n        div = L.DomUtil.create(\"div\", \"info infos\");\n        info.update();\n        var x = document.getElementsByClassName(\"info infos leaflet-control\")[0];\n\n        if (typeof x !== 'undefined') {\n          x.remove(); // console.log(\"x is..\",x)\n        }\n\n        return div;\n      };\n\n      info.update = function (props) {\n        // div.innerHTML = `<h4>RD CONGO</h4>\n        // <div style=\"color: #000000\"><b>\n        //   ${props.name}</b><br />\n        // </div>`\n        //   div.innerHTML = '<h4>RD CONGO</h4>' +  (props ?\n        // '<b>' + typeof(provinceList) !== 'undefined' && provinceList[0].nom + '</b>' \n        // : 'Survolez une province ');\n        // div.innerHTML = `<h4>RD CONGO</h4>\n        // <div style=\"color: #000000\"><b>\n        //   ${provinceList[0]}</b><br />\n        // </div>`\n        if (typeof props !== 'undefined') {\n          if (typeof provinceList !== 'undefined') {\n            for (var i = 0; i < provinceList.length; i++) {\n              console.log('info props', props.name);\n\n              if (provinceList[i] && provinceList[i].nom.toLowerCase() === props.name.toLowerCase()) {\n                // casPositif = provsDatas.provinces[i].casPositif\n                div.innerHTML = \"<h4>RD CONGO</h4>\\n                                  <div style=\\\"color: #000000\\\"><b>\\n                                    \".concat(provinceList[i].nom, \"</b><br />\\n                                  </div>\"); // div.innerHTML = '<h4>RD CONGO</h4>' + '<div style=\"color: #000000\"><b>' + provsDatas.provinces[i].nom + '</b><br />' + provsDatas.provinces[i].casPositif + ' Positifs' + '<br />' + provsDatas.provinces[i].casGuerir + ' Guéris'+ '</b><br />' + provsDatas.provinces[i].casMort + ' Décès</div>'\n                // casPositif=1000\n                // console.log('element', provsDatas.provinces[i].casPositif)\n              } // const element = provsDatas.provinces[i];\n\n            }\n          }\n        } else {\n          div.innerHTML = '<h4>RD CONGO</h4> <p style=\"color: #000000\">Survolez une province</p>';\n        } // console.log('props', props)\n\n      };\n\n      var geojson;\n      info.addTo(map);\n      geojson = L.geoJson(mapDefault, {\n        style: style,\n        onEachFeature: onEachFeature\n      }).addTo(map);\n    }\n  }, [map]); //here add map\n\n  var showMarker = function showMarker() {\n    return /*#__PURE__*/React.createElement(Marker, {\n      position: [-4.3217055, 15.3125974],\n      icon: new Icon({\n        iconUrl: markerIconPng,\n        iconSize: [25, 41],\n        iconAnchor: [12, 41]\n      }),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Popup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 7\n      }\n    }, \"A pretty CSS3 popup. \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 30\n      }\n    }), \" Easily customizable.\"));\n  };\n\n  return null;\n}\n\nexport default Info;","map":{"version":3,"names":["React","useEffect","useState","L","MapContainer","TileLayer","Marker","Popup","GeoJSON","useMap","mapDefault","markerIconPng","Icon","useHistory","getProvince","Info","history","map","provinceList","setProvinceList","fetchData","useCallback","then","response","data","console","log","catch","error","div","getColor","d","style","feature","weight","opacity","color","dashArray","fillOpacity","fillColor","properties","liveCases","highlightFeature","e","layer","target","setStyle","Browser","ie","opera","edge","bringToFront","info","update","resetHighlight","geojson","resetStyle","zoomToFeature","fitBounds","getBounds","push","onEachFeature","on","mouseover","mouseout","click","control","onAdd","DomUtil","create","x","document","getElementsByClassName","remove","props","i","length","name","nom","toLowerCase","innerHTML","addTo","geoJson","showMarker","iconUrl","iconSize","iconAnchor"],"sources":["C:/Users/CK/Documents/EMERGENCE/react/rawsur/client/EPICPRO HR - React/src/components/HRMS/Report/Info.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport L from 'leaflet';\r\nimport { MapContainer, TileLayer, Marker, Popup, GeoJSON, useMap } from 'react-leaflet'\r\nimport mapDefault from './mapDefault.json'\r\nimport markerIconPng from \"leaflet/dist/images/marker-icon.png\"\r\nimport {Icon} from 'leaflet'\r\nimport { useHistory } from 'react-router-dom';\r\nimport { getProvince } from '../../../api/province';\r\n\r\nfunction Info() {\r\n\tlet history = useHistory()\r\n  const map = useMap()\r\n  // console.log(\"map provinceList\", provinceList[0] && provinceList[0].nom)\r\n\r\n  \r\n  const [provinceList, setProvinceList] = useState([])\r\n\r\n  \r\n  const fetchData = React.useCallback(() => {\r\n    getProvince()\r\n    .then((response) => {\r\n        setProvinceList(response.data)\r\n    \r\n    console.log('setProvinceList ', response.data)\r\n    })\r\n    .catch((error) => {\r\n    console.log(error)\r\n    })\r\n\r\n}, [])\r\nReact.useEffect(() => {\r\n  fetchData()\r\n}, [fetchData])\r\n  \r\n  useEffect(() => {\r\n\r\n      \r\n    var div;\r\n    \r\n    function getColor(d) {\r\n      return  d > 400 ? '#cb181d' :\r\n      d > 300 ? '#fb6a4a' :\r\n      d > 200  ? '#fcae91' :\r\n      d > 100  ? '#fee5d9' :\r\n                  '#fff7fb';\r\n    \r\n    }\r\n\r\n    if (map) {\r\n      const info = L.control();\r\n\r\n      // \r\n\r\n      function style(feature) {\r\n        \r\n        return {\r\n          weight: 2,\r\n          opacity: 1,\r\n          color: 'white',\r\n          dashArray: '3',\r\n          fillOpacity: 0.7,\r\n          // fillColor: getColor(casPositif)\r\n          fillColor: getColor(feature.properties.liveCases)\r\n        };\r\n      }\r\n\r\n      info.onAdd = () => {\r\n        div = L.DomUtil.create(\"div\", \"info infos\" );\r\n        info.update()\r\n        var x = document.getElementsByClassName(\"info infos leaflet-control\")[0];\r\n        if (typeof(x)!== 'undefined') {\r\n          \r\n          x.remove()\r\n          // console.log(\"x is..\",x)\r\n        }\r\n        return div;\r\n      };\r\n\r\n      info.update= function(props){\r\n        \r\n        // div.innerHTML = `<h4>RD CONGO</h4>\r\n        // <div style=\"color: #000000\"><b>\r\n        //   ${props.name}</b><br />\r\n        // </div>`\r\n\r\n        \r\n        //   div.innerHTML = '<h4>RD CONGO</h4>' +  (props ?\r\n        // '<b>' + typeof(provinceList) !== 'undefined' && provinceList[0].nom + '</b>' \r\n        // : 'Survolez une province ');\r\n        // div.innerHTML = `<h4>RD CONGO</h4>\r\n        // <div style=\"color: #000000\"><b>\r\n        //   ${provinceList[0]}</b><br />\r\n        // </div>`\r\n        \r\n        if (typeof(props) !== 'undefined') {\r\n          if (typeof(provinceList) !== 'undefined') {\r\n\r\n            \r\n            for (let i = 0; i < provinceList.length; i++) {\r\n              \r\n            console.log('info props', props.name)\r\n              if (provinceList[i] &&  provinceList[i].nom.toLowerCase() === props.name.toLowerCase()) {\r\n                // casPositif = provsDatas.provinces[i].casPositif\r\n                div.innerHTML = `<h4>RD CONGO</h4>\r\n                                  <div style=\"color: #000000\"><b>\r\n                                    ${provinceList[i].nom}</b><br />\r\n                                  </div>`\r\n                // div.innerHTML = '<h4>RD CONGO</h4>' + '<div style=\"color: #000000\"><b>' + provsDatas.provinces[i].nom + '</b><br />' + provsDatas.provinces[i].casPositif + ' Positifs' + '<br />' + provsDatas.provinces[i].casGuerir + ' Guéris'+ '</b><br />' + provsDatas.provinces[i].casMort + ' Décès</div>'\r\n                // casPositif=1000\r\n                // console.log('element', provsDatas.provinces[i].casPositif)\r\n              }\r\n              // const element = provsDatas.provinces[i];\r\n              \r\n            }\r\n          }\r\n        } else {\r\n          div.innerHTML = '<h4>RD CONGO</h4> <p style=\"color: #000000\">Survolez une province</p>';\r\n        }\r\n\r\n        // console.log('props', props)\r\n      }\r\n\r\n      \r\n      function highlightFeature(e) {\r\n        var layer = e.target;\r\n\r\n        layer.setStyle({\r\n          weight: 5,\r\n          color: '#666',\r\n          dashArray: '',\r\n          fillOpacity: 0.7\r\n        });\r\n\r\n        if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {\r\n          layer.bringToFront();\r\n        }\r\n\r\n        info.update(layer.feature.properties);\r\n      }\r\n\r\n    var geojson;\r\n    function resetHighlight(e) {\r\n      geojson.resetStyle(e.target);\r\n      info.update();\r\n    }\r\n\r\n\tfunction zoomToFeature(e) {\r\n    var layer = e.target;\r\n\t\tmap.fitBounds(e.target.getBounds());\r\n    // setVilleData(layer.feature.properties.ville)\r\n    // console.log(\"layer is...\", layer.feature.properties.name)\r\n    // console.log(\"provinces geojson\", provsDatas)\r\n    \r\n    // dispatch(setCitiesDatas(layer.feature.properties.ville))\r\n    // showMarker()\r\n    history.push('/') \r\n    \r\n\t}\r\n\r\n\tfunction onEachFeature(feature, layer) {\r\n\t\tlayer.on({\r\n\t\t\tmouseover: highlightFeature,\r\n\t\t\tmouseout: resetHighlight,\r\n\t\t\tclick: zoomToFeature\r\n\t\t});\r\n\t}\r\n\r\n\r\n      info.addTo(map);\r\n      geojson = L.geoJson(mapDefault, {\r\n        style: style,\r\n        onEachFeature: onEachFeature\r\n    }).addTo(map);\r\n\r\n    }\r\n    \r\n  }, [map]); //here add map\r\n  const showMarker=()=>(\r\n    \r\n    <Marker \r\n    position={[-4.3217055, 15.3125974]} \r\n      icon={new Icon({iconUrl: markerIconPng, iconSize: [25, 41], iconAnchor: [12, 41]})} \r\n    >\r\n      <Popup>\r\n        A pretty CSS3 popup. <br /> Easily customizable.\r\n      </Popup>\r\n    </Marker>\r\n  )\r\n  \r\n  return null;\r\n}\r\n\r\nexport default Info\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}